<!DOCTYPE html>
<html>

<head>
    <script src="plotly-2.20.0.min.js" charset="utf-8"></script>
    <script src="module.js" charset="utf-8"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="stylesheet.css">
</head>

<body>
    <table style="width:100%">
        <tr>
            <!-- <th>
                <p>N<sub>t</sub> = <span id="NValue"></span> cm<sup>3</sup></p>
            </th> -->
            <th>
                <p>D<sub>g</sub> = <span id="muValue"></span> µm</p>
            </th>
            <th>
                <p>σ<sub>g</sub> = <span id="sigmaValue"></span></p>
            </th>
        </tr>
        <tr>
            <!-- <td>
                <div class="slidecontainer">
                    <input type="range" min="10" max="1000" step="10" value="100" class="slider" id="N">
                </div>
            </td> -->
            <td>
                <div class="slidecontainer">
                    <input type="range" min="0.02" max="0.8" step="0.01" value="0.08" class="slider" id="mu">
                </div>
            </td>
            <td>
                <div class="slidecontainer">
                    <input type="range" min="1.1" max="2.5" step="0.01" value="1.2" class="slider" id="sigma">
                </div>
            </td>
        </tr>
    </table>


    <div id="plot"></div>
    <script>
        var sigmaslider = document.getElementById("sigma");
        var sigmaoutput = document.getElementById("sigmaValue");
        var muslider = document.getElementById("mu");
        var muoutput = document.getElementById("muValue");
        sigmaoutput.innerHTML = sigmaslider.value;
        muoutput.innerHTML = muslider.value;

        var x = logspace(0.01, 1, 1000)
        function plotme(n) {
            var y = lnmode([100, muslider.value, sigmaslider.value], x)
            var trace3 = {
                x: x,
                y: y,
                mode: 'lines',
                type: 'line',
                name: 'n(D)',
                line: {
                    color: 'rgb(162,181,205)',
                    width: 5
                }

            };

            var data = [trace3];

            var layout = {
                title: "",
                showlegend: true,
                // font: { size: 12 }
                xaxis: {
                    title: "Diameter (µm)",
                    type: 'log',
                    autorange: true
                },
                yaxis: {
                    title: "dN/dlnD (cm⁻³)",
                    range: [0, 500]
                },
                margin: {
                    l: 50,
                    r: 50,
                    b: 100,
                    t: 10,
                    pad: 4
                },
                height: 400,
            };

            var config = {
                responsive: true,
                scrollZoom: true,
                staticPlot: false,
                displayModeBar: false
            }

            sigmaoutput.innerHTML = sigmaslider.value;
            muoutput.innerHTML = muslider.value;

            return Plotly.newPlot(plot, data, layout, config);
        }

        function sigma_callback() {
            console.log(plotme(Number(sigmaslider.value)));
        }
        sigmaslider.oninput = sigma_callback;

        function mu_callback() {
            console.log(plotme(Number(muslider.value)));
        }
        muslider.oninput = mu_callback;

        plotme(Number(sigmaslider.value));
    </script>

</body>

</html>